<script setup>
import { ref } from 'vue';

const form = ref();
const samlResponse = ref({
  samlResponse: 'PHNhbWxwOlJlc3BvbnNlIHhtbG5zOnNhbWxwPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6cHJvdG9jb2wiIHhtbG5zOnNhbWw9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphc3NlcnRpb24iIElEPSJfMzk1YjgyZDktMjRiZS00ZDYzLWJjNmMtMGJhNmMxMzNmMmU4IiBWZXJzaW9uPSIyLjAiIElzc3VlSW5zdGFudD0iMjAyNC0wNi0xOFQwNDo1MTozMy42NDBaIiBEZXN0aW5hdGlvbj0iaHR0cHM6Ly8xNTc0OTc4MTkwNzAuYXAtMS5vYnNlcnZlaW5jLmNvbS9hdXRoL3NhbWwyL2NhbGxiYWNrIiBJblJlc3BvbnNlVG89Im51bGwiPgogICAgICAgICAgICA8c2FtbDpJc3N1ZXI+aHR0cHM6Ly80OGU0LTE4My05MS0yLTQyLm5ncm9rLWZyZWUuYXBwL2FwaS9zc28vc2FtbDIvaWRwL21ldGFkYXRhPC9zYW1sOklzc3Vlcj4KICAgICAgICAgICAgPHNhbWxwOlN0YXR1cz4KICAgICAgICAgICAgICAgIDxzYW1scDpTdGF0dXNDb2RlIFZhbHVlPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6c3RhdHVzOlN1Y2Nlc3MiLz4KICAgICAgICAgICAgPC9zYW1scDpTdGF0dXM+CiAgICAgICAgICAgIDxzYW1sOkFzc2VydGlvbiBJRD0iXzM5NWI4MmQ5LTI0YmUtNGQ2My1iYzZjLTBiYTZjMTMzZjJlOCIgVmVyc2lvbj0iMi4wIiBJc3N1ZUluc3RhbnQ9IjIwMjQtMDYtMThUMDQ6NTE6MzMuNjQwWiIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeG1sbnM6eHM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIiB4bWxuczpzYW1sPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIj48c2FtbDpJc3N1ZXI+CiAgICAgICAgICAgICAgICBodHRwczovLzQ4ZTQtMTgzLTkxLTItNDIubmdyb2stZnJlZS5hcHAvYXBpL3Nzby9zYW1sMi9pZHAvbWV0YWRhdGE8L3NhbWw6SXNzdWVyPjxkczpTaWduYXR1cmUgeG1sbnM6ZHM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyMiPjxkczpTaWduZWRJbmZvPjxkczpDYW5vbmljYWxpemF0aW9uTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8xMC94bWwtZXhjLWMxNG4jIi8+PGRzOlNpZ25hdHVyZU1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZHNpZy1tb3JlI3JzYS1zaGEyNTYiLz48ZHM6UmVmZXJlbmNlIFVSST0iI18zOTViODJkOS0yNGJlLTRkNjMtYmM2Yy0wYmE2YzEzM2YyZTgiPjxkczpUcmFuc2Zvcm1zPjxkczpUcmFuc2Zvcm0gQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjZW52ZWxvcGVkLXNpZ25hdHVyZSIvPjxkczpUcmFuc2Zvcm0gQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzEwL3htbC1leGMtYzE0biMiLz48L2RzOlRyYW5zZm9ybXM+PGRzOkRpZ2VzdE1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jI3NoYTI1NiIvPjxkczpEaWdlc3RWYWx1ZT5qb3hqTmxpeTI5T0NpYnIrOHZQTnRjVkFrTCtSTTExb0RyRUJuTjVFSnFFPTwvZHM6RGlnZXN0VmFsdWU+PC9kczpSZWZlcmVuY2U+PC9kczpTaWduZWRJbmZvPjxkczpTaWduYXR1cmVWYWx1ZT40ci91WEdEMjkwS20yeFA4NEdYS2tKL1ZYek45TzFFcGk4RVpXOUp3T2R4Rk9mMFEyMit6cjlxd1huVkg5aW5lMkZRNmg5MElUODhXRWhYeTBRQTQ1U01QQW5qdlR3QW5lNFJpMm1tTU9xcGVydXhVYTVBVFRZQVlKNWVuaU11VE14ZnFZNEVGeXd5ejlETmFBdS82K0l3TGlUME9CV2tycFI1SVF4SDliclhZbURrU21uWkVad0ppZGZWQWQ3T2IzRE1jMHFOM3Q4WFM4ODFBTVpzdmRzNUdyUEFOUExXU1dUZnM1Z3RpK1RFaFZ5V0Mza2NwMTFUb05MYzg2RGd1M01GM3JCR0gwc1p5SnIvMXdjbUpDVk9zTW9FVzMrWUEwalR4SDFtVWJTWTByOGlFaVhkOUl4SVVCanB4a0xvM1dJTG83bXQ0RVB3YkNSTHBhTmh6TVJtQnlyWDVBV1I3K2pZSllJVGVIWjhqa3czOERFai81bmdWK25SNjRGUFVMLzJSdlZ6VU1MM3JDaGV1UUlKamZJTzhtdHhTbGJsK3hlNVEzdFFFYk9RK1FjOG1jQzdmYmphMnBtNThwMk9RdEU4SmoxaE1UemJPNWV5aHR1MlVpbGxaM1dSYzBsdGNIb2VSK2c1YU5YUUJ1S0t1VENxV1NlT2dnS09sVkplUHArcDQrNFlWWGZVYk9BTzdOVTRjZzJ3V1JIQXhIQWN3ZUhlS3k2K3BrUDVZLzdLZGhXMFNIeVFLUnZYOFFaWi9FcW55bFA2V1pOZS9veUYwMUYyMW5ydldIL0dRNkNlSkwvRERuQlVDdXpGcThwUTJleVFESGl5V1NvbVR3LzhtdEJPR0FFRVlsVHpLb3FqZG1YOE1DRVZjZ3F6YnZpd2dKS25PRVM1akdaZz08L2RzOlNpZ25hdHVyZVZhbHVlPjxkczpLZXlJbmZvPjxkczpYNTA5RGF0YT48ZHM6WDUwOUNlcnRpZmljYXRlPk1JSUZPakNDQXlJQ0NRQ3FQNUROK3hRWkRqQU5CZ2txaGtpRzl3MEJBUXNGQURCZk1Rc3dDUVlEVlFRR0V3SlZVekVRTUE0R0ExVUVDQXdIUm14dmNtbGtZVEVRTUE0R0ExVUVCd3dIVDNKc1lXNWtiekVOTUFzR0ExVUVDZ3dFVkdWemRERWRNQnNHQ1NxR1NJYjNEUUVKQVJZT2RHVnpkRUJuYldGcGJDNWpiMjB3SGhjTk1qTXhNVEU1TVRJek56RTNXaGNOTXpNeE1URTJNVEl6TnpFM1dqQmZNUXN3Q1FZRFZRUUdFd0pWVXpFUU1BNEdBMVVFQ0F3SFJteHZjbWxrWVRFUU1BNEdBMVVFQnd3SFQzSnNZVzVrYnpFTk1Bc0dBMVVFQ2d3RVZHVnpkREVkTUJzR0NTcUdTSWIzRFFFSkFSWU9kR1Z6ZEVCbmJXRnBiQzVqYjIwd2dnSWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUUQ1Z2lMb0x5RUQ0MUlIdDBSeEIvazZ4NEswdnpBS2lHZWNQeWVkUk5SMW95aXYzT1lrdUc1amdURTJ3Y1BaYzdrRDFFZzVkNnRoMEJXSHkvb3ZhTlM1bWtnbk9WNmpLa01hV1c0c0NNU25MbmFXeTBzZWZ0UEszTzRtTmVacE01ZTlhbWoyZ1huWnZLcks4Y3FuSi9ic1VVUXZYeHR0WE5WVm1PSFdnL3QzYzJ2SjRYdVVmcGg2d0lLYnJqMjk3SUx6dUFGUk52QVZ4ZVMwdEVsd2Vwdlo1V2JmN0hjMU1PUkFxVHB3L21wOGNSakhSellDQTl5Nk9NNGhnVnMxZ3ZUSlM4V0dvTW1zZEFaSGFPbnY5dkxKdlczakRMUVFlY09oZVlJSm5jV2djRVN6SkZJa21YYWRvcllDRWZXaHd3QmRWcGhrbm1lTHI0Qk1wSkJjbEFZYUZqWURMSUtwTWNYWU81ay8ycjNCZ1NQbHc0b3FieGJSNWdlRDA1bXlLWXRaL3dOVXRrdTExOE5qaElmSkZ1bFUva2ZEY3AxcllZa3Z6Z0JmcXI4MHdnTnBzNG9RelZyMW1ucGdIc1NUQWhYTXVaYmFUQnlKUm1QcWVjeXZ5UXFSUWNSSU4wb1RMSk5HeXpvVWYwUmtINkRLSjQrN3FEaGxxNFpobGZzbzlPRk12OXhlT05mSXJKbzVIdFRmRlpmaWRrWFpxaXIyWnF3cU5sTk9NZks1RHNZcTM3eDJHa2dxaWc0bnFMcElUWHl4Zm5RcEwySHNhb0ZybGN0dC9PTCtacWJhN05UNGhlWWs5R1g4cWxBUytJcHN2NlQySFNBTmJhaDU1b1NTM3V2Y3JET3VnMlpxNytHWU1MS1MxSUtVS2h3WCt3TE14bU13U0pROVpnRndmUUlEQVFBQk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQ2tHUFpkZmxvY1RTWEllNWJiZWhzQm4vSVBkeWIzOGVIMkhhQXZXcU8yWE5jRGNxKzYvdUxjOEJWSzRKTWEzQUZTOXh0QnphN01PWE4vbHcvQ2NiOHVKR1ZOVUUzMStyVHZzSmFEdE1DUWtwKzlhRzA0STFCb25FSGZTQjBBTmNUeS9HcCs0aEt5RkNkNngzNXV5UE83Q1dYNVo4STg3cTlMRjZEdGUzL3YxajdWWmdEakFpOXlIcEJKdjlYamUzM0FLMXZGK1dtRWZEVU9pOHkyQjhodFZlb3lTM293bG4zWlVibm1KZENtTXAyQk1ScTYzeW1JTndrbEVhWWFOcnAxTDIwMWJTcU5kS1pGMnNOd1JPV3lEWCtXRllndWZybnpQWWI2SFM4Z1liNG9FWm1hRzVjQk03SHM3MzAvM0JsYkhLaHhOVHkxSW8yVFZDWWNNUUQraWVpVmc1ZTVlR1R3YVBZR3VWdlkzTlZoTzhGYVlCRzdLMk5UMmhxdXRkQ01hUXBHeUhFemJiYlRZMWFmaGJlTW1XV3FpdlJuVkpORHY0a2dCYzJTRThKTzgycUhpa0lXOU9tMGNnaEM1eHdUVCsxSlR0eHhEMUtlQzFNMUl3THp6dXVNbXdKU0tBc3Y0ZHVEcU4rWVJJUDc4SjJTbHJzc3Fsc21vRjgrNDhlN1Z6cjdKUlQvWWEyNzRQOFJwVVBOdHhUUjdXRG1aNHR1bnFYamlCcHo2bDB1VHRWWG5qNVVCbzRIQ3lSaldKT0dmMTVPQ3VRWDAzcXo4dEtuMUliWlVmNzIzcXJtU0YrY3hCd0hxcEF5d3FoVFNzYUxqSVhLblEwVWxNb3Y3UVdiMGE1TjA3SlpNZE1TZXJiSHZiWGQvejlTMVNzZWEyK0VHdVRZdVF1cjNBPT08L2RzOlg1MDlDZXJ0aWZpY2F0ZT48L2RzOlg1MDlEYXRhPjwvZHM6S2V5SW5mbz48L2RzOlNpZ25hdHVyZT48c2FtbDpTdWJqZWN0PgogICAgICAgICAgICAgICAgPHNhbWw6TmFtZUlEIEZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6MS4xOm5hbWVpZC1mb3JtYXQ6ZW1haWxBZGRyZXNzIj50dWFubnRAdG9reW90ZWNobGFiLmNvbTwvc2FtbDpOYW1lSUQ+CiAgICAgICAgICAgICAgICA8c2FtbDpTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmNtOmJlYXJlciI+CiAgICAgICAgICAgICAgICAgICAgPHNhbWw6U3ViamVjdENvbmZpcm1hdGlvbkRhdGEgTm90T25PckFmdGVyPSIyMDI0LTA2LTE4VDA0OjU2OjMzLjY0MFoiIFJlY2lwaWVudD0iaHR0cHM6Ly8xNTc0OTc4MTkwNzAuYXAtMS5vYnNlcnZlaW5jLmNvbS9hdXRoL3NhbWwyL2NhbGxiYWNrIiBJblJlc3BvbnNlVG89Im51bGwiLz4KICAgICAgICAgICAgICAgIDwvc2FtbDpTdWJqZWN0Q29uZmlybWF0aW9uPgogICAgICAgICAgICAgICAgPC9zYW1sOlN1YmplY3Q+PHNhbWw6Q29uZGl0aW9ucyBOb3RCZWZvcmU9IjIwMjQtMDYtMThUMDQ6NTE6MzMuNjQwWiIgTm90T25PckFmdGVyPSIyMDI0LTA2LTE4VDA0OjU2OjMzLjY0MFoiPgogICAgICAgICAgICAgICAgPHNhbWw6QXVkaWVuY2VSZXN0cmljdGlvbj4KICAgICAgICAgICAgICAgICAgICA8c2FtbDpBdWRpZW5jZT4xNTc0OTc4MTkwNzA8L3NhbWw6QXVkaWVuY2U+CiAgICAgICAgICAgICAgICA8L3NhbWw6QXVkaWVuY2VSZXN0cmljdGlvbj4KICAgICAgICAgICAgICAgIDwvc2FtbDpDb25kaXRpb25zPgogICAgICAgICAgICAgICAgPHNhbWw6QXR0cmlidXRlU3RhdGVtZW50PjxzYW1sOkF0dHJpYnV0ZSBOYW1lPSJlbWFpbCIgTmFtZUZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6MS4xOmF0dHJuYW1lLWZvcm1hdDplbWFpbEFkZHJlc3MiPjxzYW1sOkF0dHJpYnV0ZVZhbHVlIHhtbG5zOnhzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeHNpOnR5cGU9InhzOnN0cmluZyI+dHVhbm50QHRva3lvdGVjaGxhYi5jb208L3NhbWw6QXR0cmlidXRlVmFsdWU+PC9zYW1sOkF0dHJpYnV0ZT48c2FtbDpBdHRyaWJ1dGUgTmFtZT0iZmlyc3ROYW1lIiBOYW1lRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXR0cm5hbWUtZm9ybWF0OmJhc2ljIj48c2FtbDpBdHRyaWJ1dGVWYWx1ZSB4bWxuczp4cz0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTp0eXBlPSJ4czpzdHJpbmciPlR1YW48L3NhbWw6QXR0cmlidXRlVmFsdWU+PC9zYW1sOkF0dHJpYnV0ZT48c2FtbDpBdHRyaWJ1dGUgTmFtZT0ibGFzdE5hbWUiIE5hbWVGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphdHRybmFtZS1mb3JtYXQ6YmFzaWMiPjxzYW1sOkF0dHJpYnV0ZVZhbHVlIHhtbG5zOnhzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeHNpOnR5cGU9InhzOnN0cmluZyI+Tmd1eWVuPC9zYW1sOkF0dHJpYnV0ZVZhbHVlPjwvc2FtbDpBdHRyaWJ1dGU+PC9zYW1sOkF0dHJpYnV0ZVN0YXRlbWVudD4KICAgICAgICAgICAgPC9zYW1sOkFzc2VydGlvbj4KICAgICAgICA8L3NhbWxwOlJlc3BvbnNlPg==',
  entityEndpoint: 'https://157497819070.ap-1.observeinc.com/auth/saml2/callback'
});

const ssoLogin = () => {
  // form.value.submit();
  fetch('http://localhost:3000/api/sso/saml2/idp/login', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
  }).then(response => response.json())
    .then(data => {
      console.log('data',  data)
      samlResponse.value = data;
      form.value.submit();
    });
}
</script>

<template>
  <div>
    <button @click="ssoLogin">SSO login</button>
    <form ref="form" id="sso" method="post" :action="samlResponse.entityEndpoint">
      <input
        type="hidden"
        name="SAMLResponse"
        id="resp"
        :value="samlResponse.samlResponse"
      />
    </form>
  </div>
</template>

<style scoped>
.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.vue:hover {
  filter: drop-shadow(0 0 2em #42b883aa);
}
</style>
